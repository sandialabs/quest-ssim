<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Inverter Controls Overview &#8212; storage-sim  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="inverter-controls-overview">
<h1>Inverter Controls Overview<a class="headerlink" href="#inverter-controls-overview" title="Link to this heading">¶</a></h1>
<p>The inverter controls for Distributed Energy Resources (DERs) like PVs and
energy storage systems are implemented based on OpenDSS. As per the IEEE 1547 standard for interconnection
and interoperability of DERs, the following inverter controls are available:</p>
<ul class="simple">
<li><p>Limiting DER power output</p></li>
<li><p>Constant power factor</p></li>
<li><p>Constant reactive power</p></li>
<li><p>Volt-Var Function</p></li>
<li><p>Volt-Watt Function</p></li>
<li><p>Combined Volt-Var and Volt-Watt Function</p></li>
</ul>
<p>Among these, the functions <em>Limiting DER power output</em>, <em>Constant power factor</em>, and
<em>Constant reactive power</em> can be setup by defining associated parameters of
the DER units while creating instances of the DER units in the JSON configuration files.
The remaining functions on otherhand are configured by creating separate inverter controllers
which in turn set the active and reactive power output.</p>
<p>An example configuration is provided in <code class="docutils literal notranslate"><span class="pre">examples/demo_inv/controls/</span>
<span class="pre">federation.json</span></code>. The following following sections will describe each of these
inverter functions and provide details on how to configure them in the simulator.</p>
<section id="inverter-controls-implemented-by-configuring-der-parameters">
<h2>Inverter Controls Implemented by Configuring DER Parameters<a class="headerlink" href="#inverter-controls-implemented-by-configuring-der-parameters" title="Link to this heading">¶</a></h2>
<section id="limiting-der-power-output">
<span id="function-limit-der-output"></span><h3>Limiting DER power output<a class="headerlink" href="#limiting-der-power-output" title="Link to this heading">¶</a></h3>
<p>This function establishes an upper limit on the active power that the DER
can produce/discharge and charge at its interface with the grid. This function
can be enabled by defining appropriate parameters when defining the DER unit(s)
in the JSON configuration file (<code class="docutils literal notranslate"><span class="pre">grid.json</span></code>). For storage units, it is specified by
defining the property <code class="docutils literal notranslate"><span class="pre">%kWRated</span></code> which applies to both charging and
discharging states. For PV systems, it is specified through the property
<code class="docutils literal notranslate"><span class="pre">%Pmpp</span></code>. In both cases, the default value is 100% meaning that the function
is disabled. In the example shown below the upper limit on the active power of
the storage unit <code class="docutils literal notranslate"><span class="pre">S1</span></code> is set to 75%.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;storage&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;S1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bus&quot;</span><span class="p">:</span> <span class="s2">&quot;671&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phases&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;kwrated&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
        <span class="s2">&quot;kwhrated&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">tored&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
        <span class="s2">&quot;kW&quot;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
        <span class="s2">&quot;%kWRated&quot;</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
        <span class="s2">&quot;kV&quot;</span><span class="p">:</span> <span class="mf">4.16</span><span class="p">,</span>
        <span class="s2">&quot;controller&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="s2">&quot;controller_params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;p_droop&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;q_droop&quot;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="constant-power-factor">
<span id="function-constant-power-factor"></span><h3>Constant power factor<a class="headerlink" href="#constant-power-factor" title="Link to this heading">¶</a></h3>
<p>In this mode of operation, the DER unit has to maintain a certain defined power factor.</p>
<p>This function is enabled by setting the property <code class="docutils literal notranslate"><span class="pre">pf</span></code> of the DER unit to the
desired value while defining the DER unit(s) in the JSON configuration file. The
default value is 1.0 for unity power factor operation. A positive power factor
means that the DER unit injects reactive power at its interface with the grid.
a negative power factor, on the other hand, will absorb reactive power.
In the example shown below the <code class="docutils literal notranslate"><span class="pre">pf</span></code> property of the storage unit <code class="docutils literal notranslate"><span class="pre">S1</span></code> is
set to a constant value of 0.8:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;storage&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;S1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bus&quot;</span><span class="p">:</span> <span class="s2">&quot;671&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phases&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;kwrated&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
        <span class="s2">&quot;kwhrated&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">tored&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
        <span class="s2">&quot;kW&quot;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
        <span class="s2">&quot;pf&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
        <span class="s2">&quot;kV&quot;</span><span class="p">:</span> <span class="mf">4.16</span><span class="p">,</span>
        <span class="s2">&quot;controller&quot;</span><span class="p">:</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span>
        <span class="s2">&quot;controller_params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;p_droop&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;q_droop&quot;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="constant-reactive-power">
<span id="function-constant-reactive-power"></span><h3>Constant reactive power<a class="headerlink" href="#constant-reactive-power" title="Link to this heading">¶</a></h3>
<p>In this mode of operation, the DER unit will maintain a constant reactive power output (either injection or absorption).</p>
<p>This function is enabled by setting the property <code class="docutils literal notranslate"><span class="pre">kvar</span></code> of the DER unit to
the desired value while defining the DER unit(s) in the JSON configuration file in a similar fashion to above examples.</p>
</section>
</section>
<section id="inverter-controls-implemented-by-defining-an-controller">
<h2>Inverter Controls Implemented by Defining an Controller<a class="headerlink" href="#inverter-controls-implemented-by-defining-an-controller" title="Link to this heading">¶</a></h2>
<p>Before diving into the specifics of how to configure these remaining functions, a basic overview of
these functions are provided below. Readers are encouraged to look into IEEE1547 standard
for an in-depth description.</p>
<ul class="simple">
<li><p><strong>Volt-Var Mode</strong>: In this mode of operation, the reactive power output of the DER unit is controlled as a function of voltage following a voltage-reactive power characteristic. An example voltage-reactive characteristic is shown below. Parameters for this characteristic is recommend in the IEEE1547 standard.</p></li>
<li><p><strong>Volt-Watt Mode</strong>: In this mode of operation, the DER unit will limit the maximum active power as a function of the voltage based on voltage-active power characteristic. Examples characteristics are illustrated in figure below.</p></li>
<li><p><strong>Watt-var Mode</strong>: In this mode of operation, the DER unit will control the reactive power output as function of the active power output following a linear active power-reactive power characteristic. An example characteristic is shown below.</p></li>
<li><p><strong>Combined Volt-Var and Volt-Watt Mode (Volt-Var + Volt-Watt)</strong>: In this mode of operation, both the volt-var mode and the volt-watt mode described above are active at the same time.</p></li>
</ul>
<p>These inverter functions can be configured by two sets of parameters. The first set of parameters
is common to all the inverter functions that are available while the second set corresponds to
each specific inverter function which can either be associated with controlling reactive power,
limiting active power or both.</p>
<section id="common-parameters-for-all-inverter-functions">
<h3>Common Parameters for All Inverter Functions<a class="headerlink" href="#common-parameters-for-all-inverter-functions" title="Link to this heading">¶</a></h3>
<p>The common parameters that need to be defined for <em>all</em> inverter functions are:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">der_list</span></code>: List of DER units to be controlled by the defined inverter controller. If this parameter is not specified, all the DER units in the model will be controlled by the defined inverter controller.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;der_list&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;PVsystem.PV1&quot;</span><span class="p">,</span> <span class="s2">&quot;PVsystem.PV2&quot;</span><span class="p">,</span> <span class="s2">&quot;Storage.S1&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">inverter_control_mode</span></code>: Name of inverter control function to be enabled. The valid values for the available functions are:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">VOLTVAR</span></code> for volt-var function</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VOLTWATT</span></code> for volt-watt function</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WATTVAR</span></code> for watt-var function</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VV_VW</span></code> for combined volt-var and volt-watt function</p></li>
</ul>
</dd>
</dl>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The rest of these parameters are for advanced tuning. These can be left at default values.</p>
</div>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">voltage_curvex_ref</span></code>: Required for <code class="docutils literal notranslate"><span class="pre">VOLTVAR</span></code> and <code class="docutils literal notranslate"><span class="pre">VOLTWATT</span></code> modes. Base voltage used to normalize (compute per-unit values) of the monitored voltage. The options are listed below:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rated</span></code>: This is the default value for this parameter. Uses the rated voltage of the controlled DER unit as the base voltage. In other words, 1.0 in the volt-var curve equals rated voltage.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">avg</span></code>: Uses an average value calculated using the monitored votlage of previous time steps that are stored in a moving window. The window has length in units of time defined using the parameter <code class="docutils literal notranslate"><span class="pre">avgwindowlen</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ravg</span></code>: Uses the rated voltage of the controlled DER unit as the base voltage. Same as avg, with the exception that the avgerage terminal voltage is divided by the rated voltage.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">avgwindowlen</span></code>: Required for <code class="docutils literal notranslate"><span class="pre">VOLTVAR</span></code> and <code class="docutils literal notranslate"><span class="pre">VOLTWATT</span></code> modes. Sets the length of the averaging window over which the average DER terminal voltage is calculated. Units are indicated by appending s, m, or h to the integer value. Defaults to 0 seconds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">voltageChangeTolerance</span></code>: Tolerance in per-unit of the control loop convergence associated to the monitored voltage in per-unit. The inverter control loop converges if the terminal voltage of the DER unit between two consecutive iterations is less than this value. Defaults to 0.0001 pu.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RateofChangeMode</span></code>: Required for <code class="docutils literal notranslate"><span class="pre">VOLTVAR</span></code> and <code class="docutils literal notranslate"><span class="pre">VOLTWATT</span></code> modes. Limits the changes of the reactive power and the active power between time steps. Defaults to <code class="docutils literal notranslate"><span class="pre">INACTIVE</span></code>. The options are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">INACTIVE</span></code>: Indicates no limit on rate of change for either active or reactive power output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LPF</span></code>: A low-pass filter will be applied to the reactive or active power output as a function of a time constant defined by the parameter <code class="docutils literal notranslate"><span class="pre">LPFTau</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RISEFALL</span></code>: A rise and fall limit in the change of active and/or reactive power expressed in terms of pu power per second, defined in the parameter <code class="docutils literal notranslate"><span class="pre">RiseFallLimit</span></code>, is applied to the desired reactive power and/or the active power limit.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">LPFTau</span></code>: Filter time constant of the LPF option of the RateofChangeMode property. The time constant will cause the low-pass filter to achieve 95% of the target value in 3 time constants. Defaults to 0 seconds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RiseFallLimit</span></code>: Limit in power in pu per second used by the <code class="docutils literal notranslate"><span class="pre">RISEFALL</span></code> option of the <code class="docutils literal notranslate"><span class="pre">RateofChangeMode</span></code> paramter.The base value for this ramp is defined in the <code class="docutils literal notranslate"><span class="pre">RefReactivePower</span></code> parameter and/or in <code class="docutils literal notranslate"><span class="pre">VoltwattYAxis</span></code> parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">monBus</span></code>: Name of monitored bus used by the voltage-dependent control modes. Default is bus of the controlled DER unit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">monBusesVbase</span></code>: Array list of rated voltages of the buses and their nodes presented in the <code class="docutils literal notranslate"><span class="pre">monBus</span></code> parameter. This list may have different line-to-line and/or line-to-ground voltages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">monVoltageCalc</span></code>: Number of the phase being monitored or one of {AVG | MAX | MIN} for all phases.</p></li>
</ol>
</section>
<section id="parameters-that-control-reactive-power">
<h3>Parameters that Control Reactive Power<a class="headerlink" href="#parameters-that-control-reactive-power" title="Link to this heading">¶</a></h3>
<p>These parameters control the reactive power of the DER unit being controlled.
These parameters effect the following inverter functions - volt-var, DRC,
watt-var.</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RefReactivePower</span></code>: Required for <code class="docutils literal notranslate"><span class="pre">VOLTVAR</span></code> and <code class="docutils literal notranslate"><span class="pre">WATVAR</span></code> mode. Defines the base reactive power according to one of the following options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">VARAVAL</span></code>: The base values are equal to the available reactive power.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VARMAX</span></code>: The base values are equal to the value defined in the <code class="docutils literal notranslate"><span class="pre">kvarMax</span></code> and <code class="docutils literal notranslate"><span class="pre">kvarMaxAbs</span></code> properties of the DER units. These properties need to be defined when adding the DER units through the JSON configuration files.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">VarChangeTolerance</span></code>: Required for <code class="docutils literal notranslate"><span class="pre">VOLTVAR</span></code> mode. Tolerance in per-unit of the control loop convergence associated with the reactive power. Defaults to 0.025 per unit of the base provided or absorbed reactive power described in the <code class="docutils literal notranslate"><span class="pre">RefReactivePower</span></code> property. The inverter control loop converges if the reactive power of the DER unit between two consecutive iterations is less than this value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deltaQ_factor</span></code>:  Required for <code class="docutils literal notranslate"><span class="pre">VOLTVAR</span></code> mode. The y-axis corresponds to the value in pu of the kVA property of the PVSystem.Sets the maximum change (in per unit) from the prior var output level to the desired var output level during each control iteration. Defaults to -1.0 meaning OpenDSS engine take care of selection of this factor internally.</p></li>
</ol>
</section>
<section id="parameters-that-limit-active-power">
<h3>Parameters that Limit Active Power<a class="headerlink" href="#parameters-that-limit-active-power" title="Link to this heading">¶</a></h3>
<p>These parameters limit the active power of the DER unit being controlled. These
parameters mainly effect the volt-watt function:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ActivePChangeTolerance</span></code>: Required for <code class="docutils literal notranslate"><span class="pre">VOLTWATT</span></code> mode. Tolerance in per-unit of the control loop convergence associated with the active power. The inverter control loop converges if the active power of the DER unit between two consecutive iterations is less than this value. Defaults to 0.01.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deltaP_factor</span></code>: Required for <code class="docutils literal notranslate"><span class="pre">VOLTWATT</span></code> mode.  Sets the maximum change (in unit of the y-axis) from the prior active power output level to the desired active power output level during each control iteration. Defaults to -1.0 meaning OpenDSS engine take care of selection of this factor internally. Possible range of values is between 0.05 and 1.0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VoltwattYAxis</span></code>: Required for <code class="docutils literal notranslate"><span class="pre">VOLTWATT</span></code> mode. Specifies the units for the y-axis of the volt-watt curve. The following options are allowed (Defaults to PMPPU), TO DO: for Storage?:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PMPPPU</span></code>: TThe y-axis corresponds to the value in pu of Pmpp property of the PVSystem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PAVAILABLEPU</span></code>: The y-axis corresponds to the value in pu of the available active power of the PVSystem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PCTPMPPPU</span></code>: The y-axis corresponds to the value in pu of the power Pmpp multiplied by 1/100 of the %Pmpp property of the PVSystem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KVARATINGPU</span></code>:  The y-axis corresponds to the value in pu of the kVA property of the PVSystem.</p></li>
</ul>
</li>
</ol>
</section>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>[1] OpenDSS Manual.</p></li>
<li><p>[2] IEEE1547 Standard.</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">storage-sim</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">Public API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ems.html">Energy Management System</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Simulation Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2021, John P. Eddy, William F. Vining, Ujjwol Tamrakar.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/inverter_controls.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>